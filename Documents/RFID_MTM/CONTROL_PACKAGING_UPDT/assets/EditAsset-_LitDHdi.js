import{i as b,E as k,a as d,j as a}from"./index-fIXkcG0q.js";import{a as c}from"./axios-B17pQD9q.js";import{S as m}from"./sweetalert2.esm.all-BQxta0Da.js";import{C as P,a as N}from"./CRow-B962IMet.js";import{C as S,a as y}from"./CCardBody-CRtrtls-.js";import{C as w}from"./CCardHeader-Nag4upoQ.js";import{C as E}from"./CForm-DqBs6qy4.js";import{C as i}from"./CFormLabel-BxnjwlR-.js";import{C as h}from"./CFormInput-RZ7mtaEn.js";import{C as g}from"./CFormSelect-2df0xZQG.js";import{a as u}from"./index.esm-Cme2ool-.js";import"./CFormControlWrapper-wuPxfQED.js";import"./CFormControlValidation-Cldlh3vc.js";const U=()=>{const n=b(),{id:l}=k(),[e,p]=d.useState({rfid_tag:"",asset_code:"",packaging_id:"",part_id:"",status:"in"}),[x,j]=d.useState([]),[C,f]=d.useState([]);d.useEffect(()=>{(async()=>{try{const o=await c.get("/packagings"),v=await c.get("/parts"),r=await c.get(`/assets/${l}`);j(o.data),f(v.data),p({rfid_tag:r.data.rfid_tag,asset_code:r.data.asset_code,packaging_id:r.data.packaging_id,part_id:r.data.part_id,status:r.data.status})}catch{m.fire("Error","Gagal mengambil data asset","error"),n("/assets")}})()},[l,n]);const t=s=>{p({...e,[s.target.name]:s.target.value})},_=async s=>{s.preventDefault();try{await c.put(`/assets/${l}`,e),m.fire({icon:"success",title:"Berhasil!",text:"Asset berhasil diperbarui",timer:1500,showConfirmButton:!1}).then(()=>{n("/assets")})}catch(o){m.fire("Gagal",o.response?.data?.message||"Gagal update asset","error")}};return a.jsx(P,{children:a.jsx(N,{xs:6,children:a.jsxs(S,{className:"mb-4",children:[a.jsx(w,{children:a.jsx("strong",{className:"fs-5",children:"Edit Asset"})}),a.jsx(y,{children:a.jsxs(E,{onSubmit:_,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx(i,{children:"RFID Tag"}),a.jsx(h,{name:"rfid_tag",value:e.rfid_tag,onChange:t})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(i,{children:"Kode Asset"}),a.jsx(h,{name:"asset_code",value:e.asset_code,onChange:t})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(i,{children:"Part"}),a.jsxs(g,{name:"part_id",value:e.part_id,onChange:t,children:[a.jsx("option",{value:"",children:"Pilih Part"}),C.map(s=>a.jsxs("option",{value:s.id,children:[s.part_number," - ",s.part_name]},s.id))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(i,{children:"Packaging"}),a.jsxs(g,{name:"packaging_id",value:e.packaging_id,onChange:t,children:[a.jsx("option",{value:"",children:"Pilih Packaging"}),x.map(s=>a.jsx("option",{value:s.id,children:s.packaging_name},s.id))]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(i,{children:"Status"}),a.jsxs(g,{name:"status",value:e.status,onChange:t,children:[a.jsx("option",{value:"in",children:"IN"}),a.jsx("option",{value:"out",children:"OUT"})]})]}),a.jsxs("div",{children:[a.jsx(u,{type:"submit",color:"primary",className:"me-2",children:"Simpan"}),a.jsx(u,{color:"secondary",onClick:()=>n("/assets"),children:"Batal"})]})]})})]})})})};export{U as default};
