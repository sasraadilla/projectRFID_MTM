import{i as v,a as d,j as e}from"./index-fIXkcG0q.js";import{c as w}from"./index.esm-Cme2ool-.js";import{X as T}from"./index.es-Bvx8zBbk.js";import{a as u}from"./axios-B17pQD9q.js";import{C,a as p}from"./CRow-B962IMet.js";import{c as I}from"./cil-layers-B1iR7JfU.js";import{c as R,a as k}from"./cil-settings-B3tkFesE.js";import{c as z}from"./cil-factory-YYdVTRnB.js";const b=l=>{const s=Number(l),r=s>0,a=s<0,i=r?"#dafbe1":a?"#fee2e2":"#f1f5f9",o=r?"#166534":a?"#991b1b":"#64748b",m=r?"▲":a?"▼":" ",g=r?"+":"";return e.jsxs("div",{style:{background:i,color:o,padding:"6px 12px",borderRadius:"8px",fontWeight:"800",fontSize:"0.9rem",display:"inline-flex",alignItems:"center",gap:"6px",border:`1px solid ${r?"#86efac":a?"#fca5a5":"#e2e8f0"}`,minWidth:"70px",justifyContent:"center",boxShadow:r||a?"0 2px 4px rgba(0,0,0,0.05)":"none"},children:[e.jsx("span",{style:{fontSize:"0.7rem"},children:m}),e.jsxs("span",{children:[g,s]})]})},x=({title:l,value:s,icon:r,color:a,badge:i})=>e.jsxs("div",{style:{background:`linear-gradient(135deg, ${a} 0%, ${a}ee 100%)`,borderRadius:"20px",padding:"24px",color:"white",position:"relative",height:"100%",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",display:"flex",flexDirection:"column",justifyContent:"space-between",overflow:"hidden",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:o=>{o.currentTarget.style.transform="translateY(-5px)",o.currentTarget.style.boxShadow="0 15px 35px rgba(0,0,0,0.2)"},onMouseLeave:o=>{o.currentTarget.style.transform="translateY(0)",o.currentTarget.style.boxShadow="0 10px 25px rgba(0,0,0,0.15)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",zIndex:1},children:[e.jsx("p",{style:{fontSize:"0.85rem",fontWeight:"700",margin:0,letterSpacing:"0.8px",textTransform:"uppercase",opacity:.85},children:l}),i&&e.jsx("span",{style:{background:"rgba(255,255,255,0.25)",padding:"4px 10px",borderRadius:"10px",fontSize:"0.75rem",fontWeight:"800",backdropFilter:"blur(8px)",border:"1px solid rgba(255,255,255,0.3)",whiteSpace:"nowrap"},children:i})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px",zIndex:1},children:[e.jsx("h2",{style:{fontSize:s&&s.toString().length>8?"1.8rem":"2.6rem",fontWeight:"800",margin:0,lineHeight:1.1,letterSpacing:"-1px"},children:s||"0"}),e.jsx("div",{style:{background:"rgba(255,255,255,0.2)",padding:"10px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(w,{icon:r,size:"xl"})})]}),e.jsx("div",{style:{position:"absolute",right:"-20px",bottom:"-20px",width:"100px",height:"100px",background:"rgba(255,255,255,0.1)",borderRadius:"50%",zIndex:0}})]}),P=()=>{const l=v(),[s,r]=d.useState({total_asset:0,di_customer:0,di_customer_target:80,di_internal:0,repair:0}),[a,i]=d.useState([]),o=d.useCallback(async()=>{try{const t=await u.get("/dashboard/kpi"),n=await u.get("/dashboard/table");t.data&&r(t.data),n.data&&i(n.data)}catch(t){console.error("Error loading live dashboard data:",t)}},[]);d.useEffect(()=>{const t=document.createElement("link");t.href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap",t.rel="stylesheet",document.head.appendChild(t);const n=document.createElement("style");return n.innerHTML="* { font-family: 'Plus Jakarta Sans', sans-serif !important; }",document.head.appendChild(n),o(),()=>{document.head.removeChild(t),document.head.removeChild(n)}},[o]);const m=[{name:"CUSTOMER",selector:t=>t.customer,sortable:!0,cell:t=>e.jsx("span",{style:{fontWeight:"700",color:"#1e293b"},children:t.customer})},{name:"ASSET",selector:t=>t.asset,sortable:!0,cell:t=>e.jsx("span",{style:{color:"#475569",fontWeight:"500"},children:t.asset})},{name:"IN",selector:t=>t.in,center:!0,cell:t=>e.jsx("span",{style:{fontWeight:"800",color:"#1e40af",fontSize:"1rem"},children:t.in})},{name:"OUT",selector:t=>t.out,center:!0,cell:t=>e.jsx("span",{style:{fontWeight:"800",color:"#b91c1c",fontSize:"1rem"},children:t.out})},{name:"Δ HARIAN",center:!0,cell:t=>b(t.daily)},{name:"Δ MINGGUAN",center:!0,cell:t=>b(t.weekly)},{name:"AKUM MTD",center:!0,cell:t=>{const n=Number(t.mtd),c=n>0,f=n<0,y=c?"#dafbe1":f?"#fee2e2":"#f1f5f9",j=c?"#166534":f?"#991b1b":"#64748b",S=c?"+":"";return e.jsxs("div",{onClick:()=>l(`/dashboard/grafik/${t.customer}/${t.asset}`),style:{cursor:"pointer",background:y,color:j,padding:"6px 14px",borderRadius:"8px",fontWeight:"800",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"6px",border:`1px solid ${c?"#86efac":f?"#fca5a5":"#e2e8f0"}`,boxShadow:"0 2px 5px rgba(0,0,0,0.08)",whiteSpace:"nowrap",transition:"all 0.2s ease"},onMouseEnter:h=>h.currentTarget.style.transform="scale(1.05)",onMouseLeave:h=>h.currentTarget.style.transform="scale(1)",children:[S,n,e.jsx("span",{style:{fontSize:"0.65rem",opacity:.7,fontWeight:"700"},children:" DETAIL"})]})}}],g={headRow:{style:{backgroundColor:"#1e293b",color:"white",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",minHeight:"52px"}},headCells:{style:{color:"white",fontWeight:"700",fontSize:"0.85rem",textTransform:"uppercase",letterSpacing:"1px"}},rows:{style:{minHeight:"65px","&:not(:last-of-type)":{borderBottom:"1px solid #f1f5f9"}}}};return e.jsxs("div",{style:{padding:"24px",backgroundColor:"#f8fafc",minHeight:"100vh"},children:[e.jsxs(C,{className:"mb-4 g-4",children:[e.jsx(p,{lg:3,sm:6,children:e.jsx(x,{title:"SUPPORTING FACILITY",value:s.total_asset,icon:I,color:"#ef4444"})}),e.jsx(p,{lg:3,sm:6,children:e.jsx(x,{title:"DI CUSTOMER",value:s.di_customer,badge:`Target: ${s.di_customer_target||80}`,icon:R,color:"#6366f1"})}),e.jsx(p,{lg:3,sm:6,children:e.jsx(x,{title:"DI INTERNAL",value:s.di_internal,icon:z,color:"#22c55e"})}),e.jsx(p,{lg:3,sm:6,children:e.jsx(x,{title:"REPAIR",value:s.repair,icon:k,color:"#f59e0b"})})]}),e.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"30px",boxShadow:"0 10px 30px rgba(0,0,0,0.04)"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h5",{style:{fontWeight:"800",color:"#1e293b",fontSize:"1.4rem",margin:0},children:"ASSET IN / OUT STATUS"}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#64748b",fontWeight:"500"},children:["Last Update: ",new Date().toLocaleTimeString()]})]}),e.jsx(T,{columns:m,data:a,customStyles:g,highlightOnHover:!0,pointerOnHover:!0,noDataComponent:e.jsx("div",{className:"p-5 text-center text-muted",children:"Loading dashboard data..."})})]})]})};export{P as default};
