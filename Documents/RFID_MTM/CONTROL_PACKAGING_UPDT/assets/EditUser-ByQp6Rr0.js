import{i as x,E as j,a as c,j as e}from"./index-fIXkcG0q.js";import{a as u}from"./axios-B17pQD9q.js";import{S as m}from"./sweetalert2.esm.all-BQxta0Da.js";import{C,a as f}from"./CRow-B962IMet.js";import{C as g,a as v}from"./CCardBody-CRtrtls-.js";import{C as b}from"./CCardHeader-Nag4upoQ.js";import{C as w}from"./CForm-DqBs6qy4.js";import{C as i}from"./CFormLabel-BxnjwlR-.js";import{C as t}from"./CFormInput-RZ7mtaEn.js";import{C as y}from"./CFormSelect-2df0xZQG.js";import{a as h}from"./index.esm-Cme2ool-.js";import"./CFormControlWrapper-wuPxfQED.js";import"./CFormControlValidation-Cldlh3vc.js";const A=()=>{const l=x(),{id:n}=j(),[r,d]=c.useState({username:"",name:"",email:"",password:"",role:""});c.useEffect(()=>{(async()=>{try{const o=await u.get(`/users/${n}`);d({...o.data,password:""})}catch{m.fire("Error","Gagal mengambil data user","error")}})()},[n]);const a=s=>{d({...r,[s.target.name]:s.target.value})},p=async s=>{s.preventDefault();try{await u.put(`/users/${n}`,r),m.fire({icon:"success",title:"Berhasil!",text:"User berhasil diperbarui",timer:1500,showConfirmButton:!0}).then(()=>l("/users"))}catch(o){m.fire("Gagal",o.response?.data?.message||"Gagal update user","error")}};return e.jsx(C,{children:e.jsx(f,{xs:6,children:e.jsxs(g,{className:"mb-4",children:[e.jsx(b,{children:e.jsx("strong",{className:"fs-5",children:"Edit User"})}),e.jsx(v,{children:e.jsxs(w,{onSubmit:p,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{children:"Username"}),e.jsx(t,{name:"username",value:r.username,onChange:a,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{children:"Nama Lengkap"}),e.jsx(t,{name:"name",value:r.name,onChange:a,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{children:"Email"}),e.jsx(t,{type:"email",name:"email",value:r.email,onChange:a,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{children:"Password (opsional)"}),e.jsx(t,{type:"password",name:"password",placeholder:"Kosongkan jika tidak diubah",value:r.password,onChange:a})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{children:"Role"}),e.jsxs(y,{name:"role",value:r.role,onChange:a,required:!0,children:[e.jsx("option",{value:"",children:"Pilih Role"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"operator",children:"Operator"})]})]}),e.jsxs("div",{children:[e.jsx(h,{type:"submit",color:"primary",className:"me-2",children:"Simpan"}),e.jsx(h,{color:"secondary",onClick:()=>l("/users"),children:"Batal"})]})]})})]})})})};export{A as default};
