import{i as j,a as i,j as e}from"./index-fIXkcG0q.js";import{a as c}from"./axios-B17pQD9q.js";import{S as n}from"./sweetalert2.esm.all-BQxta0Da.js";import{C as u,a as f}from"./CRow-B962IMet.js";import{C as g,a as v}from"./CCardBody-CRtrtls-.js";import{C as b}from"./CCardHeader-Nag4upoQ.js";import{C as y}from"./CForm-DqBs6qy4.js";import{C as o}from"./CFormLabel-BxnjwlR-.js";import{C as S}from"./CFormSelect-2df0xZQG.js";import{C as l}from"./CFormInput-RZ7mtaEn.js";import{a as d}from"./index.esm-Cme2ool-.js";import"./CFormControlWrapper-wuPxfQED.js";import"./CFormControlValidation-Cldlh3vc.js";const H=()=>{const m=j(),[s,p]=i.useState({asset_id:"",repair_type:"",location:"",notes:""}),[h,x]=i.useState([]);i.useEffect(()=>{(async()=>{try{const t=await c.get("/assets");x(t.data)}catch{n.fire("Error","Gagal mengambil data asset","error")}})()},[]);const r=a=>{p({...s,[a.target.name]:a.target.value})},C=async a=>{a.preventDefault();try{await c.post("/repairs",s),n.fire({icon:"success",title:"Berhasil!",text:"Repair berhasil ditambahkan",timer:1500,showConfirmButton:!1}).then(()=>m("/repair"))}catch(t){n.fire("Gagal",t.response?.data?.message||"Gagal menambah repair","error")}};return e.jsx(u,{children:e.jsx(f,{xs:6,children:e.jsxs(g,{children:[e.jsx(b,{children:e.jsx("strong",{children:"Tambah Repair"})}),e.jsx(v,{children:e.jsxs(y,{onSubmit:C,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{children:"Asset"}),e.jsxs(S,{name:"asset_id",value:s.asset_id,onChange:r,children:[e.jsx("option",{value:"",children:"-- Pilih Asset --"}),h.map(a=>e.jsx("option",{value:a.id,children:a.asset_code},a.id))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{children:"Repair Type"}),e.jsx(l,{name:"repair_type",placeholder:"Contoh: Maintenance",value:s.repair_type,onChange:r})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{children:"Location"}),e.jsx(l,{name:"location",placeholder:"Contoh: Warehouse",value:s.location,onChange:r})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{children:"Notes"}),e.jsx(l,{name:"notes",placeholder:"Optional",value:s.notes,onChange:r})]}),e.jsxs("div",{children:[e.jsx(d,{type:"submit",color:"primary",className:"me-2",children:"Simpan"}),e.jsx(d,{color:"secondary",onClick:()=>m("/repair"),children:"Batal"})]})]})})]})})})};export{H as default};
