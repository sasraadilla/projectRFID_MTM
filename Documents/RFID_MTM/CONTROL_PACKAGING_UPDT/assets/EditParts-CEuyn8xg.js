import{i as g,E as f,a as i,j as a}from"./index-fIXkcG0q.js";import{a as c}from"./axios-B17pQD9q.js";import{S as n}from"./sweetalert2.esm.all-BQxta0Da.js";import{C as b,a as v}from"./CRow-B962IMet.js";import{C as y,a as k}from"./CCardBody-CRtrtls-.js";import{C as N}from"./CCardHeader-Nag4upoQ.js";import{C as P}from"./CForm-DqBs6qy4.js";import{C as s}from"./CFormLabel-BxnjwlR-.js";import{C as m}from"./CFormInput-RZ7mtaEn.js";import{C as E}from"./CFormSelect-2df0xZQG.js";import{a as p}from"./index.esm-Cme2ool-.js";import"./CFormControlWrapper-wuPxfQED.js";import"./CFormControlValidation-Cldlh3vc.js";const Q=()=>{const l=g(),{id:o}=f(),[u,h]=i.useState([]),[e,d]=i.useState({part_number:"",part_name:"",customer_id:"",qty_per_pack:"",keterangan:""}),x=async()=>{try{const r=await c.get("/customers");h(r.data)}catch{n.fire("Error","Gagal mengambil data customer","error")}},C=async()=>{try{const r=await c.get(`/parts/${o}`);d({part_number:r.data.part_number,part_name:r.data.part_name,customer_id:r.data.customer_id,qty_per_pack:r.data.qty_per_pack,keterangan:r.data.keterangan})}catch{n.fire("Error","Gagal mengambil data part","error")}};i.useEffect(()=>{x(),C()},[o]);const t=r=>{d({...e,[r.target.name]:r.target.value})},j=async r=>{r.preventDefault();try{await c.put(`/parts/${o}`,e),n.fire({icon:"success",title:"Berhasil!",text:"Part berhasil diperbarui",timer:1500,showConfirmButton:!1}).then(()=>l("/parts"))}catch(_){n.fire("Gagal",_.response?.data?.message||"Gagal update part","error")}};return a.jsx(b,{children:a.jsx(v,{xs:6,children:a.jsxs(y,{className:"mb-4",children:[a.jsx(N,{children:a.jsx("strong",{className:"fs-5",children:"Edit Part"})}),a.jsx(k,{children:a.jsxs(P,{onSubmit:j,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx(s,{children:"Part Number"}),a.jsx(m,{name:"part_number",value:e.part_number,onChange:t})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(s,{children:"Part Name"}),a.jsx(m,{name:"part_name",value:e.part_name,onChange:t})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(s,{children:"Customer"}),a.jsxs(E,{name:"customer_id",value:e.customer_id,onChange:t,children:[a.jsx("option",{value:"",children:"Pilih Customer"}),u.map(r=>a.jsxs("option",{value:r.id,children:[r.customer_code," - ",r.customer_name]},r.id))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(s,{children:"Qty per Pack"}),a.jsx(m,{type:"number",name:"qty_per_pack",value:e.qty_per_pack,onChange:t})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(s,{children:"Keterangan"}),a.jsx(m,{name:"keterangan",value:e.keterangan,onChange:t})]}),a.jsxs("div",{children:[a.jsx(p,{type:"submit",color:"primary",className:"me-2",children:"Simpan"}),a.jsx(p,{color:"secondary",onClick:()=>l("/parts"),children:"Batal"})]})]})})]})})})};export{Q as default};
