import{i as y,a as t,j as a}from"./index-fIXkcG0q.js";import{X as j}from"./index.es-Bvx8zBbk.js";import{a as n,c as w}from"./index.esm-Cme2ool-.js";import{a as c}from"./axios-B17pQD9q.js";import{S as r}from"./sweetalert2.esm.all-BQxta0Da.js";import{C as l,a as p}from"./CRow-B962IMet.js";import{C as R,a as S}from"./CCardBody-CRtrtls-.js";import{C as B}from"./CCardHeader-Nag4upoQ.js";import{C as k}from"./CFormInput-RZ7mtaEn.js";import{c as L}from"./cil-check-Dqg5Ixbd.js";import"./CFormControlWrapper-wuPxfQED.js";import"./CFormControlValidation-Cldlh3vc.js";import"./CFormLabel-BxnjwlR-.js";const X=()=>{const m=y(),[d,u]=t.useState([]),[s,h]=t.useState(""),o=async()=>{try{const e=await c.get("/repairs");u(e.data)}catch{r.fire("Error","Gagal mengambil data repair","error")}};t.useEffect(()=>{o()},[]);const C=async e=>{if((await r.fire({title:"Selesaikan repair?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, selesai",cancelButtonText:"Batal"})).isConfirmed)try{await c.put(`/repairs/${e}/finish`),r.fire("Berhasil","Repair selesai","success"),o()}catch(g){r.fire("Gagal",g.response?.data?.message||"Gagal menyelesaikan repair","error")}},f=d.filter(e=>e.asset_code.toLowerCase().includes(s.toLowerCase())||e.repair_type.toLowerCase().includes(s.toLowerCase())||e.status.toLowerCase().includes(s.toLowerCase())),x=[{name:"No",cell:(e,i)=>i+1,width:"70px"},{name:"Asset Code",selector:e=>e.asset_code},{name:"Repair Type",selector:e=>e.repair_type},{name:"Location",selector:e=>e.location},{name:"Notes",selector:e=>e.notes},{name:"Status",selector:e=>e.status},{name:"Repair Date",selector:e=>e.repair_date},{name:"Finished At",selector:e=>e.finished_at||"-"},{name:"Aksi",cell:e=>e.status==="ongoing"?a.jsxs(n,{size:"sm",color:"success",onClick:()=>C(e.id),children:[a.jsx(w,{icon:L})," Selesai"]}):"-"}];return a.jsx(l,{children:a.jsx(p,{xs:12,children:a.jsxs(R,{children:[a.jsx(B,{children:a.jsx("strong",{children:"Data Repair"})}),a.jsxs(S,{children:[a.jsx(n,{color:"primary",onClick:()=>m("/repair/add"),children:"+ Tambah Repair"}),a.jsx(l,{className:"mb-3",children:a.jsx(p,{xs:12,md:4,className:"ms-auto",children:a.jsx(k,{className:"my-3",placeholder:"Cari repair...",value:s,onChange:e=>h(e.target.value)})})}),a.jsx(j,{columns:x,data:f,pagination:!0,striped:!0,highlightOnHover:!0,responsive:!0,customStyles:{rows:{style:{minHeight:"56px"}},cells:{style:{paddingTop:"12px",paddingBottom:"12px",fontSize:"14px"}},headRow:{style:{backgroundColor:"#007bff"}},headCells:{style:{color:"white",fontWeight:"600",fontSize:"14px"}}}})]})]})})})};export{X as default};
