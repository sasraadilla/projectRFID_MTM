import{a as r,j as a}from"./index-fIXkcG0q.js";import{a as u}from"./axios-B17pQD9q.js";import{S as d}from"./sweetalert2.esm.all-BQxta0Da.js";import{C as T,a as w}from"./CCardBody-CRtrtls-.js";import{C as F}from"./CCardHeader-Nag4upoQ.js";import{C as N,a as i}from"./CRow-B962IMet.js";import{C as h}from"./CFormSelect-2df0xZQG.js";import{a as J}from"./index.esm-Cme2ool-.js";import{C as M,e as A,b as m,c as t,a as E,d as s}from"./CTable-DnddnBdL.js";import"./CFormControlWrapper-wuPxfQED.js";import"./CFormControlValidation-Cldlh3vc.js";import"./CFormLabel-BxnjwlR-.js";const L=()=>{const[x,p]=r.useState([]),[j]=r.useState([{value:1,label:"Januari"},{value:2,label:"Februari"},{value:3,label:"Maret"},{value:4,label:"April"},{value:5,label:"Mei"},{value:6,label:"Juni"},{value:7,label:"Juli"},{value:8,label:"Agustus"},{value:9,label:"September"},{value:10,label:"Oktober"},{value:11,label:"November"},{value:12,label:"Desember"}]),[b,v]=r.useState([]),[C,f]=r.useState([]),[n,g]=r.useState(""),[o,y]=r.useState(""),[c,S]=r.useState(""),P={1:"Januari",2:"Februari",3:"Maret",4:"April",5:"Mei",6:"Juni",7:"Juli",8:"Agustus",9:"September",10:"Oktober",11:"November",12:"Desember"},k=async()=>{try{const e=await u.get("/parts");f(e.data);const l=await u.get("/forecast/months");v(l.data)}catch{d.fire("Error","Gagal load filter data","error")}};r.useEffect(()=>{k()},[]);const D=async()=>{if(!n||!o){d.fire("Info","Pilih bulan dan tahun terlebih dahulu","warning");return}try{const e=P[n];let l=`/forecast/calc?month=${encodeURIComponent(e)}&year=${o}`;c&&(l+=`&part_id=${c}`);const _=await u.get(l);p(_.data)}catch{d.fire("Error","Gagal mengambil data kalkulasi","error")}};return a.jsxs(T,{className:"mb-4",children:[a.jsx(F,{children:a.jsx("strong",{className:"fs-5",children:"Detail Forecast / Kalkulasi Kebutuhan Packaging"})}),a.jsxs(w,{children:[a.jsxs(N,{className:"mb-3",children:[a.jsx(i,{xs:3,children:a.jsxs(h,{value:n,onChange:e=>g(e.target.value),children:[a.jsx("option",{value:"",children:"Pilih Bulan"}),j.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]})}),a.jsx(i,{xs:3,children:a.jsxs(h,{value:o,onChange:e=>y(e.target.value),children:[a.jsx("option",{value:"",children:"Pilih Tahun"}),b.map(e=>a.jsx("option",{value:e,children:e},e))]})}),a.jsx(i,{xs:3,children:a.jsxs(h,{value:c,onChange:e=>S(e.target.value),children:[a.jsx("option",{value:"",children:"Pilih Part"}),C.map(e=>a.jsxs("option",{value:e.id,children:[e.part_number," - ",e.part_name]},e.id))]})}),a.jsx(i,{xs:3,children:a.jsx(J,{color:"primary",onClick:D,children:"Hitung"})})]}),a.jsxs(M,{striped:!0,responsive:!0,children:[a.jsx(A,{children:a.jsxs(m,{children:[a.jsx(t,{children:"Part"}),a.jsx(t,{children:"Packaging"}),a.jsx(t,{children:"Fc/Day"}),a.jsx(t,{children:"Pack/Day"}),a.jsx(t,{children:"Total Need"}),a.jsx(t,{children:"Actual"}),a.jsx(t,{children:"Status"})]})}),a.jsx(E,{children:x.map(e=>a.jsxs(m,{children:[a.jsx(s,{children:e.part_name}),a.jsx(s,{children:e.packaging}),a.jsx(s,{children:e.forecast_day}),a.jsx(s,{children:e.packaging_per_day}),a.jsx(s,{children:e.total_need}),a.jsx(s,{children:e.actual}),a.jsx(s,{children:e.status})]},e.forecast_month_id))})]})]})]})};export{L as default};
