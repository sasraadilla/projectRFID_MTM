import{i as w,a as r,j as s}from"./index-fIXkcG0q.js";import{X as y}from"./index.es-Bvx8zBbk.js";import{a as t,c}from"./index.esm-Cme2ool-.js";import{a as m}from"./axios-B17pQD9q.js";import{S as o}from"./sweetalert2.esm.all-BQxta0Da.js";import{C as d,a as u}from"./CRow-B962IMet.js";import{C as b,a as B}from"./CCardBody-CRtrtls-.js";import{C as N}from"./CCardHeader-Nag4upoQ.js";import{C as U}from"./CFormInput-RZ7mtaEn.js";import{C as k,c as S}from"./DefaultLayout-BU91WUCq.js";import{c as v}from"./cil-trash-CBbKHhHb.js";import"./CFormControlWrapper-wuPxfQED.js";import"./CFormControlValidation-Cldlh3vc.js";import"./CFormLabel-BxnjwlR-.js";import"./cil-user-Ddrdy7PS.js";const W=()=>{const n=w(),[h,p]=r.useState([]),[a,x]=r.useState(""),i=async()=>{try{const e=await m.get("/users");p(e.data)}catch(e){console.error(e),alert("Gagal mengambil data user")}};r.useEffect(()=>{i()},[]);const C=async e=>{if((await o.fire({title:"Apakah anda yakin?",text:"User akan dihapus permanen!",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed)try{await m.delete(`/users/${e}`),o.fire({icon:"success",title:"Berhasil!",text:"User berhasil dihapus",timer:1500,showConfirmButton:!1}),i()}catch(j){console.error(j),o.fire("Gagal","Gagal menghapus user","error")}},f=h.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())||e.username.toLowerCase().includes(a.toLowerCase())),g=[{name:"No",cell:(e,l)=>l+1,width:"70px",center:!0},{name:"Username",selector:e=>e.username,sortable:!0},{name:"Nama",selector:e=>e.name,sortable:!0},{name:"Email",selector:e=>e.email,sortable:!0},{name:"Role",cell:e=>s.jsx(k,{color:e.role==="admin"?"primary":"secondary",children:e.role}),center:!0},{name:"Aksi",cell:e=>s.jsxs(s.Fragment,{children:[s.jsxs(t,{color:"warning",size:"sm",className:"me-2",onClick:()=>n(`/users/edit/${e.id}`),children:[s.jsx(c,{icon:S})," Ubah"]}),s.jsxs(t,{color:"danger",size:"sm",onClick:()=>C(e.id),children:[s.jsx(c,{icon:v})," Hapus"]})]}),center:!0}];return s.jsx(d,{children:s.jsx(u,{xs:12,children:s.jsxs(b,{className:"mb-4",children:[s.jsx(N,{children:s.jsx("strong",{className:"fs-5",children:"Data Users"})}),s.jsxs(B,{children:[s.jsx("div",{className:"mb-3",children:s.jsx(t,{color:"primary",onClick:()=>n("/users/add"),children:"+ Tambah"})}),s.jsx(d,{className:"mb-3",children:s.jsx(u,{xs:12,md:4,className:"ms-auto",children:s.jsx(U,{placeholder:"Cari nama atau username...",value:a,onChange:e=>x(e.target.value)})})}),s.jsx(y,{columns:g,data:f,pagination:!0,striped:!0,highlightOnHover:!0,responsive:!0,customStyles:{rows:{style:{minHeight:"56px"}},cells:{style:{paddingTop:"12px",paddingBottom:"12px",fontSize:"14px"}},headRow:{style:{backgroundColor:"#007bff"}},headCells:{style:{color:"white",fontWeight:"600",fontSize:"14px"}}}})]})]})})})};export{W as default};
