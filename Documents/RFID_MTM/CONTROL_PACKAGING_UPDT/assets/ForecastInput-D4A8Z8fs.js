import{i as _,a as n,j as a}from"./index-fIXkcG0q.js";import{a as o}from"./axios-B17pQD9q.js";import{S as t}from"./sweetalert2.esm.all-BQxta0Da.js";import{C as v,a as b}from"./CRow-B962IMet.js";import{C as y,a as F}from"./CCardBody-CRtrtls-.js";import{C as S}from"./CCardHeader-Nag4upoQ.js";import{C as N}from"./CForm-DqBs6qy4.js";import{C as i}from"./CFormLabel-BxnjwlR-.js";import{C as m}from"./CFormSelect-2df0xZQG.js";import{C as c}from"./CFormInput-RZ7mtaEn.js";import{a as d}from"./index.esm-Cme2ool-.js";import"./CFormControlWrapper-wuPxfQED.js";import"./CFormControlValidation-Cldlh3vc.js";const T=()=>{const l=_(),[h,g]=n.useState([]),[p,u]=n.useState([]),[r,j]=n.useState({forecast_month_id:"",kalender_kerja:"",packaging_id:"",lead_time:"",actual_packaging:""}),k=async()=>{try{const e=await o.get("/forecast/month");g(e.data)}catch{t.fire("Error","Gagal load forecast bulan","error")}},x=async()=>{try{const e=await o.get("/packagings");u(e.data)}catch{t.fire("Error","Gagal load packaging","error")}};n.useEffect(()=>{k(),x()},[]);const s=e=>{j({...r,[e.target.name]:e.target.value})},f=async e=>{if(e.preventDefault(),!r.forecast_month_id||!r.kalender_kerja||!r.packaging_id){t.fire("Peringatan","Semua field wajib diisi","warning");return}try{await o.post("/forecast/input",r),t.fire({icon:"success",title:"Berhasil!",text:"Data forecast berhasil disimpan",timer:1500,showConfirmButton:!1}).then(()=>l("/forecast"))}catch(C){t.fire("Gagal",C.response?.data?.message||"Gagal menyimpan data forecast","error")}};return a.jsx(v,{children:a.jsx(b,{xs:8,children:a.jsxs(y,{className:"mb-4",children:[a.jsx(S,{children:a.jsx("strong",{className:"fs-5",children:"Input Forecast Harian / Packaging"})}),a.jsx(F,{children:a.jsxs(N,{onSubmit:f,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx(i,{children:"Forecast Bulan"}),a.jsxs(m,{name:"forecast_month_id",value:r.forecast_month_id,onChange:s,children:[a.jsx("option",{value:"",children:"Pilih Forecast Bulan"}),h.map(e=>a.jsxs("option",{value:e.id,children:[e.part_number," - ",e.part_name," (",e.bulan," ",e.tahun,")"]},e.id))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(i,{children:"Hari Kerja"}),a.jsx(c,{type:"number",name:"kalender_kerja",placeholder:"Masukkan jumlah hari kerja",value:r.kalender_kerja,onChange:s})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(i,{children:"Packaging"}),a.jsxs(m,{name:"packaging_id",value:r.packaging_id,onChange:s,children:[a.jsx("option",{value:"",children:"Pilih Packaging"}),p.map(e=>a.jsxs("option",{value:e.id,children:[e.packaging_name," (",e.kapasitas_packaging," pcs)"]},e.id))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(i,{children:"Lead Time (hari)"}),a.jsx(c,{type:"number",name:"lead_time",placeholder:"Masukkan total lead time",value:r.lead_time,onChange:s})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(i,{children:"Actual Packaging"}),a.jsx(c,{type:"number",name:"actual_packaging",placeholder:"Masukkan jumlah fisik yang tersedia",value:r.actual_packaging,onChange:s})]}),a.jsxs("div",{children:[a.jsx(d,{type:"submit",color:"primary",className:"me-2",children:"Simpan"}),a.jsx(d,{color:"secondary",onClick:()=>l("/forecast"),children:"Batal"})]})]})})]})})})};export{T as default};
